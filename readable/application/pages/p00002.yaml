---
# ====== Page: Gestion de documentos =========================
id: 2
identification: 
  name: Gestion de documentos
  alias: GESTION-DE-DOCUMENTOS
  title: Gestion de documentos

appearance: 
  page-mode: Normal
  page-template: Theme Default
  template-options: 
  - '#DEFAULT#'

navigation-menu: 
  override-user-interface-level: false

navigation: 
  cursor-focus: Do not focus cursor
  warn-on-unsaved-changes: true

security: 
  authentication: Page Requires Authentication
  deep-linking: Application Default
  page-access-protection: Arguments Must Have Checksum
  form-auto-complete: Off
  browser-cache: Application Default

session-management: 
  rejoin-sessions: Application Default

advanced: 
  enable-duplicate-page-submissions: Yes - Enable page to be re-posted
  reload-on-submit: Only for Success

server-cache: 
  caching: Disabled

regions: 
- # ====== Region: Cargar Documento ============================
  id: 8176731798235410
  identification: 
    name: Cargar Documento
    title: Cargar Documento
    type: Form

  source: 
    location: Local Database
    type: Table / View
    table-owner: Parsing Schema
    table-name: APUNTIA_DOCUMENTS
    include-rowid-column: true
    where-clause: document_id = -1

  layout: 
    sequence: 10
    parent-region: No Parent
    slot: BODY
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Standard
    template-options: 
    - '#DEFAULT#'
    - t-Region--scrollBody
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: false
    exclude-title-from-translation: false

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    edit: 
      enabled: false

- # ====== Region: Documentos Cargados =========================
  id: 8178516011235428
  identification: 
    name: Documentos Cargados
    title: Documentos Cargados
    type: Classic Report

  source: 
    location: Local Database
    type: SQL Query
    sql-query: |
      SELECT 
          document_id,
          document_name,
          document_type,
          TO_CHAR(upload_date, 'DD/MM/YYYY HH24:MI') as fecha_carga,
          user_id,
          CASE 
              WHEN processed_text IS NOT NULL THEN '‚úÖ Procesado'
              ELSE '‚ùå Pendiente'
          END as estado_procesamiento,
          LENGTH(processed_text) as caracteres_texto,
          CASE 
              WHEN file_blob IS NOT NULL THEN 'üìÑ Disponible'
              ELSE '‚ùå Sin archivo'
          END as estado_archivo
      FROM APUNTIA_DOCUMENTS
      ORDER BY upload_date DESC

  order-by: 
    type: None

  layout: 
    sequence: 20
    parent-region: No Parent
    slot: BODY
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Standard
    template-options: 
    - '#DEFAULT#'
    - t-Region--scrollBody
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: false
    exclude-title-from-translation: false

  server-cache: 
    caching: Disabled

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    layout: 
      number-of-rows-type: Static Value
      number-of-rows: 15

    appearance: 
      template-type: Theme
      template: Standard
      template-options: 
      - '#DEFAULT#'
      - t-Report--altRowsDefault
      - t-Report--rowHighlight

    pagination: 
      type: Row Ranges X to Y (with next and previous links)
      display-position: Bottom - Right
      partial-page-refresh: true

    performance: 
      lazy-loading: false

    break-formatting: 
      break-columns: No Break

    advanced: 
      strip-html: false
      sort-nulls: Last

    heading: 
      type: Custom Headings

    download: 
      csv-export-enabled: false

    printing: 
      enabled: false

  columns: 
  - # ====== Column: DOCUMENT_ID =================================
    id: 8178657848235429
    identification: 
      column-name: DOCUMENT_ID
      type: Plain Text

    heading: 
      heading: Document Id
      alignment: end

    layout: 
      sequence: 10
      column-alignment: end

    accessibility: 
      value-identifies-row: false

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

  - # ====== Column: DOCUMENT_NAME ===============================
    id: 8178755691235430
    identification: 
      column-name: DOCUMENT_NAME
      type: Plain Text

    heading: 
      heading: Document Name
      alignment: start

    layout: 
      sequence: 20
      column-alignment: start

    accessibility: 
      value-identifies-row: false

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

  - # ====== Column: DOCUMENT_TYPE ===============================
    id: 8178865582235431
    identification: 
      column-name: DOCUMENT_TYPE
      type: Plain Text

    heading: 
      heading: Document Type
      alignment: start

    layout: 
      sequence: 30
      column-alignment: start

    accessibility: 
      value-identifies-row: false

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

  - # ====== Column: FECHA_CARGA =================================
    id: 8178954450235432
    identification: 
      column-name: FECHA_CARGA
      type: Plain Text

    heading: 
      heading: Fecha Carga
      alignment: start

    layout: 
      sequence: 40
      column-alignment: start

    accessibility: 
      value-identifies-row: false

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

  - # ====== Column: USER_ID =====================================
    id: 8179074965235433
    identification: 
      column-name: USER_ID
      type: Plain Text

    heading: 
      heading: User Id
      alignment: start

    layout: 
      sequence: 50
      column-alignment: start

    accessibility: 
      value-identifies-row: false

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

  - # ====== Column: ESTADO_PROCESAMIENTO ========================
    id: 8179167891235434
    identification: 
      column-name: ESTADO_PROCESAMIENTO
      type: Plain Text

    heading: 
      heading: Estado Procesamiento
      alignment: start

    layout: 
      sequence: 60
      column-alignment: start

    accessibility: 
      value-identifies-row: false

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

  - # ====== Column: CARACTERES_TEXTO ============================
    id: 8179241567235435
    identification: 
      column-name: CARACTERES_TEXTO
      type: Plain Text

    heading: 
      heading: Caracteres Texto
      alignment: end

    layout: 
      sequence: 70
      column-alignment: end

    accessibility: 
      value-identifies-row: false

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

  - # ====== Column: ESTADO_ARCHIVO ==============================
    id: 8179372527235436
    identification: 
      column-name: ESTADO_ARCHIVO
      type: Plain Text

    heading: 
      heading: Estado Archivo
      alignment: start

    layout: 
      sequence: 80
      column-alignment: start

    accessibility: 
      value-identifies-row: false

    sorting: 
      sortable: false

    export-/-printing: 
      include-in-export-/-print: true

    advanced: 
      compute-sum: false

    ui-defaults-reference: 
      table-owner: Parsing Schema

    security: 
      escape-special-characters: true

- # ====== Region: Mis Documentos ==============================
  id: 8180498371235447
  identification: 
    name: Mis Documentos
    type: Interactive Report

  source: 
    location: Local Database
    type: SQL Query
    sql-query: |
      SELECT 
          d.document_id,
          d.document_name,
          d.document_type,
          TO_CHAR(d.upload_date, 'DD/MM/YYYY HH24:MI') as fecha_carga,
          CASE d.status
              WHEN 'PROCESSED' THEN '<span class="fa fa-check-circle" style="color: green;"></span> Procesado'
              WHEN 'PENDING' THEN '<span class="fa fa-clock-o" style="color: orange;"></span> Pendiente'
              WHEN 'ERROR' THEN '<span class="fa fa-times-circle" style="color: red;"></span> Error'
              ELSE d.status
          END as estado,
          (SELECT COUNT(*) FROM APUNTIA_CHUNKS c WHERE c.document_id = d.document_id) as fragmentos,
          ROUND(LENGTH(d.processed_text)/1024, 2) || ' KB' as tama√±o
      FROM APUNTIA_DOCUMENTS d
      WHERE d.user_id = :APP_USER
      ORDER BY d.upload_date DESC

  layout: 
    sequence: 30
    parent-region: No Parent
    slot: BODY
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Interactive Report
    template-options: 
    - '#DEFAULT#'
    - t-IRR-region--hideHeader js-addHiddenHeadingRoleDesc
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: false
    exclude-title-from-translation: false

  server-cache: 
    caching: Disabled

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    id: 8180519769235448
    link: 
      link-column: Exclude Link Column

    pagination: 
      type: Row Ranges X to Y
      display-position: Bottom - Right

    performance: 
      lazy-loading: false
      maximum-rows-to-process: 1000000

    search-bar: 
      include-search-bar: true
      search-field: true
      finder-drop-down: true
      reports-select-list: true
      rows-per-page-selector: false

    actions-menu: 
      include-actions-menu: true
      filter: true
      select-columns: true
      rows-per-page: true
      sort: true
      control-break: true
      highlight: true
      compute: true
      aggregate: true
      chart: true
      group-by: true
      pivot: true
      flashback: true
      save-report: true
      save-public-report: false
      reset: true
      help: true
      download: true
      subscription: true

    download: 
      formats: 
      - CSV
      - HTML
      - Excel
      - PDF
      send-as-email: true

    heading: 
      fixed-to: Page

    icon-view: 
      show: false

    detail-view: 
      show: false

    saved-reports: 
    - # ====== Saved Report: Primary Report ========================
      id: 10848408309958398
      identification: 
        name: Primary Report
        alias: 108485

    columns: 
    - # ====== Column: DOCUMENT_ID =================================
      id: 8180629209235449
      identification: 
        column-name: DOCUMENT_ID
        type: Plain Text

      heading: 
        heading: Document Id
        alignment: end

      single-row-view: 
        use-column-heading: true

      layout: 
        sequence: 10
        column-alignment: end

      accessibility: 
        value-identifies-row: false

      source: 
        primary-key: false

      column-filter: 
        type: Default Based on Column Type

      enable-users-to: 
        hide: true
        sort: true
        filter: true
        highlight: true
        control-break: true
        aggregate: true
        compute: true
        chart: true
        group-by: true
        pivot: true

      security: 
        escape-special-characters: true

    - # ====== Column: DOCUMENT_NAME ===============================
      id: 8180769033235450
      identification: 
        column-name: DOCUMENT_NAME
        type: Plain Text

      heading: 
        heading: Document Name
        alignment: start

      single-row-view: 
        use-column-heading: true

      layout: 
        sequence: 20
        column-alignment: start

      accessibility: 
        value-identifies-row: false

      source: 
        primary-key: false

      column-filter: 
        type: Default Based on Column Type

      enable-users-to: 
        hide: true
        sort: true
        filter: true
        highlight: true
        control-break: true
        aggregate: true
        compute: true
        chart: true
        group-by: true
        pivot: true

      security: 
        escape-special-characters: true

    - # ====== Column: DOCUMENT_TYPE ===============================
      id: 10840598762945501
      identification: 
        column-name: DOCUMENT_TYPE
        type: Plain Text

      heading: 
        heading: Document Type
        alignment: start

      single-row-view: 
        use-column-heading: true

      layout: 
        sequence: 30
        column-alignment: start

      accessibility: 
        value-identifies-row: false

      source: 
        primary-key: false

      column-filter: 
        type: Default Based on Column Type

      enable-users-to: 
        hide: true
        sort: true
        filter: true
        highlight: true
        control-break: true
        aggregate: true
        compute: true
        chart: true
        group-by: true
        pivot: true

      security: 
        escape-special-characters: true

    - # ====== Column: FECHA_CARGA =================================
      id: 10840651228945502
      identification: 
        column-name: FECHA_CARGA
        type: Plain Text

      heading: 
        heading: Fecha Carga
        alignment: start

      single-row-view: 
        use-column-heading: true

      layout: 
        sequence: 40
        column-alignment: start

      accessibility: 
        value-identifies-row: false

      source: 
        primary-key: false

      column-filter: 
        type: Default Based on Column Type

      enable-users-to: 
        hide: true
        sort: true
        filter: true
        highlight: true
        control-break: true
        aggregate: true
        compute: true
        chart: true
        group-by: true
        pivot: true

      security: 
        escape-special-characters: true

    - # ====== Column: ESTADO ======================================
      id: 10840750463945503
      identification: 
        column-name: ESTADO
        type: Plain Text

      heading: 
        heading: Estado
        alignment: start

      single-row-view: 
        use-column-heading: true

      layout: 
        sequence: 50
        column-alignment: start

      accessibility: 
        value-identifies-row: false

      source: 
        primary-key: false

      column-filter: 
        type: Default Based on Column Type

      enable-users-to: 
        hide: true
        sort: true
        filter: true
        highlight: true
        control-break: true
        aggregate: true
        compute: true
        chart: true
        group-by: true
        pivot: true

      security: 
        escape-special-characters: true

    - # ====== Column: FRAGMENTOS ==================================
      id: 10840845443945504
      identification: 
        column-name: FRAGMENTOS
        type: Plain Text

      heading: 
        heading: Fragmentos
        alignment: end

      single-row-view: 
        use-column-heading: true

      layout: 
        sequence: 60
        column-alignment: end

      accessibility: 
        value-identifies-row: false

      source: 
        primary-key: false

      column-filter: 
        type: Default Based on Column Type

      enable-users-to: 
        hide: true
        sort: true
        filter: true
        highlight: true
        control-break: true
        aggregate: true
        compute: true
        chart: true
        group-by: true
        pivot: true

      security: 
        escape-special-characters: true

    - # ====== Column: TAMA√ëO ======================================
      id: 10840948740945505
      identification: 
        column-name: TAMA√ëO
        type: Plain Text

      heading: 
        heading: Tama√±o
        alignment: start

      single-row-view: 
        use-column-heading: true

      layout: 
        sequence: 70
        column-alignment: start

      accessibility: 
        value-identifies-row: false

      source: 
        primary-key: false

      column-filter: 
        type: Default Based on Column Type

      enable-users-to: 
        hide: true
        sort: true
        filter: true
        highlight: true
        control-break: true
        aggregate: true
        compute: true
        chart: true
        group-by: true
        pivot: true

      security: 
        escape-special-characters: true

    printing: 
      output: 
        layout: Default Report Layout
        view-file-as: Attachment

      page: 
        size: Letter
        orientation: Landscape
        units: Inches
        width: 11
        height: 8.5
        border-width: 0.5
        border-color: '#666666'

      page-header: 
        font: Helvetica
        font-weight: Normal
        font-size: 12
        font-color: '#000000'
        alignment: center

      column-headings: 
        font: Helvetica
        font-weight: Bold
        font-size: 10
        font-color: '#000000'
        background-color: '#EEEEEE'

      columns: 
        font: Helvetica
        font-weight: Normal
        font-size: 10
        font-color: '#000000'
        background-color: '#FFFFFF'

      page-footer: 
        font: Helvetica
        font-weight: Normal
        font-size: 12
        font-color: '#000000'
        alignment: center

- # ====== Region: Breadcrumb ==================================
  id: 8993713211263782
  identification: 
    name: Breadcrumb
    type: Breadcrumb

  source: 
    breadcrumb: Breadcrumb # 8126008590085522

  layout: 
    sequence: 10
    parent-region: No Parent
    slot: REGION_POSITION_01
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Title Bar
    template-options: 
    - '#DEFAULT#'
    - t-BreadcrumbRegion--useBreadcrumbTitle
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: false
    exclude-title-from-translation: false

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    appearance: 
      breadcrumb-template: Breadcrumb
      template-options: 
      - '#DEFAULT#'

page-items: 
- # ====== Page Item: P2_DOCUMENT_ID ===========================
  id: 8176962573235412
  identification: 
    name: P2_DOCUMENT_ID
    type: Hidden

  settings: 
    value-protected: true

  layout: 
    sequence: 10
    region: Cargar Documento # 8176731798235410
    slot: BODY

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    form-region: Cargar Documento # 8176731798235410
    column: DOCUMENT_ID
    data-type: NUMBER
    query-only: true
    primary-key: true

  session-state: 
    data-type: VARCHAR2
    storage: Per Request (Memory Only)

  security: 
    session-state-protection: Checksum Required - Session Level
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P2_FILE_UPLOAD ===========================
  id: 8177083617235413
  identification: 
    name: P2_FILE_UPLOAD
    type: File Upload

  label: 
    label: Selecciona archivo
    alignment: Left

  display: 
    display-as: Inline File Browse
    capture-using: NONE

  storage:: 
    type: Table APEX_APPLICATION_TEMP_FILES
    purge-file-at: End of Session
    allow-multiple-files: true
    file-types: .pdf, .doc, .docx, .txt, .jpg, .png
    maximum-file-size: 10000

  layout: 
    sequence: 20
    region: Cargar Documento # 8176731798235410
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    width: 30

  validation: 
    value-required: true
    maximum-length: 255

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    form-region: Cargar Documento # 8176731798235410
    column: DOCUMENT_NAME
    data-type: VARCHAR2
    query-only: false
    primary-key: false

  session-state: 
    storage: Per Request (Memory Only)

  security: 
    session-state-protection: Unrestricted
    restricted-characters: All characters can be saved.

- # ====== Page Item: P2_DOCUMENT_TYPE =========================
  id: 8177107826235414
  identification: 
    name: P2_DOCUMENT_TYPE
    type: Text Field

  label: 
    label: Document Type
    alignment: Left

  settings: 
    subtype: Text
    trim-spaces: Leading and Trailing
    text-case: NO CHANGE
    submit-when-enter-pressed: false
    disabled: false

  layout: 
    sequence: 40
    region: Cargar Documento # 8176731798235410
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    width: 30

  validation: 
    value-required: false
    maximum-length: 50

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    form-region: Cargar Documento # 8176731798235410
    column: DOCUMENT_TYPE
    data-type: VARCHAR2
    query-only: false
    primary-key: false

  session-state: 
    storage: Per Request (Memory Only)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P2_UPLOAD_DATE ===========================
  id: 8177205188235415
  identification: 
    name: P2_UPLOAD_DATE
    type: Date Picker

  label: 
    label: Upload Date
    alignment: Left

  settings: 
    show-time: false
    display-as: Popup
    minimum-date: None
    maximum-date: None
    multiple-months: No
    use-defaults: true

  layout: 
    sequence: 50
    region: Cargar Documento # 8176731798235410
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    width: 30

  validation: 
    value-required: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    form-region: Cargar Documento # 8176731798235410
    column: UPLOAD_DATE
    data-type: TIMESTAMP
    query-only: false
    primary-key: false

  session-state: 
    storage: Per Request (Memory Only)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P2_FILE_BLOB =============================
  id: 8177372354235416
  identification: 
    name: P2_FILE_BLOB
    type: Text Field

  label: 
    label: File Blob
    alignment: Left

  settings: 
    subtype: Text
    trim-spaces: Leading and Trailing
    text-case: NO CHANGE
    submit-when-enter-pressed: false
    disabled: false

  layout: 
    sequence: 60
    region: Cargar Documento # 8176731798235410
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    width: 30

  validation: 
    value-required: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    form-region: Cargar Documento # 8176731798235410
    column: FILE_BLOB
    data-type: BLOB
    query-only: false
    primary-key: false

  session-state: 
    storage: Per Request (Memory Only)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P2_PROCESSED_TEXT ========================
  id: 8177469240235417
  identification: 
    name: P2_PROCESSED_TEXT
    type: Textarea

  label: 
    label: Processed Text
    alignment: Left

  settings: 
    resizable: true
    auto-height: false
    character-counter: false
    trim-spaces: Leading and Trailing

  layout: 
    sequence: 70
    region: Cargar Documento # 8176731798235410
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    width: 30
    height: 5

  validation: 
    value-required: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    form-region: Cargar Documento # 8176731798235410
    column: PROCESSED_TEXT
    data-type: CLOB
    query-only: false
    primary-key: false

  session-state: 
    data-type: CLOB
    storage: Per Request (Memory Only)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P2_METADATA ==============================
  id: 8177593241235418
  identification: 
    name: P2_METADATA
    type: Textarea

  label: 
    label: Metadata
    alignment: Left

  settings: 
    resizable: true
    auto-height: false
    character-counter: false
    trim-spaces: Leading and Trailing

  layout: 
    sequence: 80
    region: Cargar Documento # 8176731798235410
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    width: 30
    height: 5

  validation: 
    value-required: false

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    form-region: Cargar Documento # 8176731798235410
    column: METADATA
    data-type: CLOB
    query-only: false
    primary-key: false

  session-state: 
    data-type: CLOB
    storage: Per Request (Memory Only)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P2_USER_ID ===============================
  id: 8177691444235419
  identification: 
    name: P2_USER_ID
    type: Text Field

  label: 
    label: User Id
    alignment: Left

  settings: 
    subtype: Text
    trim-spaces: Leading and Trailing
    text-case: NO CHANGE
    submit-when-enter-pressed: false
    disabled: false

  layout: 
    sequence: 90
    region: Cargar Documento # 8176731798235410
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    width: 30

  validation: 
    value-required: false
    maximum-length: 100

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    form-region: Cargar Documento # 8176731798235410
    column: USER_ID
    data-type: VARCHAR2
    query-only: false
    primary-key: false

  session-state: 
    storage: Per Request (Memory Only)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P2_COURSE_ID =============================
  id: 8177704234235420
  identification: 
    name: P2_COURSE_ID
    type: Text Field

  label: 
    label: Course Id
    alignment: Left

  settings: 
    subtype: Text
    trim-spaces: Leading and Trailing
    text-case: NO CHANGE
    submit-when-enter-pressed: false
    disabled: false

  layout: 
    sequence: 100
    region: Cargar Documento # 8176731798235410
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    width: 30

  validation: 
    value-required: false
    maximum-length: 100

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    form-region: Cargar Documento # 8176731798235410
    column: COURSE_ID
    data-type: VARCHAR2
    query-only: false
    primary-key: false

  session-state: 
    storage: Per Request (Memory Only)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P2_STATUS ================================
  id: 8177832178235421
  identification: 
    name: P2_STATUS
    type: Text Field

  label: 
    label: Status
    alignment: Left

  settings: 
    subtype: Text
    trim-spaces: Leading and Trailing
    text-case: NO CHANGE
    submit-when-enter-pressed: false
    disabled: false

  layout: 
    sequence: 110
    region: Cargar Documento # 8176731798235410
    slot: BODY
    alignment: Left
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic
    label-column-span: Page Template Default

  appearance: 
    template: Optional - Floating
    template-options: 
    - '#DEFAULT#'
    width: 30

  validation: 
    value-required: false
    maximum-length: 20

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    form-region: Cargar Documento # 8176731798235410
    column: STATUS
    data-type: VARCHAR2
    query-only: false
    primary-key: false

  session-state: 
    storage: Per Request (Memory Only)

  quick-picks: 
    show-quick-picks: false

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

- # ====== Page Item: P2_ROWID =================================
  id: 8177907259235422
  identification: 
    name: P2_ROWID
    type: Hidden

  settings: 
    value-protected: true

  layout: 
    sequence: 120
    region: Cargar Documento # 8176731798235410
    slot: BODY

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    form-region: Cargar Documento # 8176731798235410
    column: ROWID
    data-type: ROWID
    primary-key: true

  session-state: 
    data-type: VARCHAR2
    storage: Per Request (Memory Only)

  security: 
    session-state-protection: Checksum Required - Session Level
    store-value-encrypted-in-session-state: true
    restricted-characters: All characters can be saved.

buttons: 
- # ====== Button: Cargar ======================================
  id: 8178100904235424
  identification: 
    button-name: Cargar
    label: Cargar Documento

  layout: 
    sequence: 10
    region: Cargar Documento # 8176731798235410
    slot: CREATE
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    button-template: Text
    hot: false
    template-options: 
    - '#DEFAULT#'

  behavior: 
    action: Submit Page
    execute-validations: true
    show-processing: false
    warn-on-unsaved-changes: Do Not Check

processes: 
- # ====== Process: Initialize form Gestion de documentos ======
  id: 8176806359235411
  identification: 
    name: Initialize form Gestion de documentos
    type: Form - Initialization
    execution-chain: None
    form-region: Cargar Documento # 8176731798235410

  execution: 
    sequence: 10
    point: Before Header
    run-process: Once Per Page Visit (default)

- # ====== Process: Procesar_Documento =========================
  id: 8178039749235423
  identification: 
    name: Procesar_Documento
    type: Execute Code
    execution-chain: None

  source: 
    location: Local Database
    language: PL/SQL
    pl/sql-code: |
      DECLARE
          v_document_id NUMBER;
          v_blob BLOB;
          v_clob CLOB;
          v_filename VARCHAR2(500);
          v_mime_type VARCHAR2(200);
      BEGIN
          SELECT blob_content, filename, mime_type
          INTO v_blob, v_filename, v_mime_type
          FROM apex_application_temp_files
          WHERE name = :P2_FILE_UPLOAD;
          
          BEGIN
              v_clob := apex_util.blob_to_clob(v_blob);
          EXCEPTION
              WHEN OTHERS THEN
                  v_clob := 'Contenido del archivo no disponible para procesamiento de texto.';
          END;
          
          v_clob := REGEXP_REPLACE(v_clob, '[^[:print:][:space:]]', ' ');
          
          INSERT INTO APUNTIA_DOCUMENTS (
              document_name,
              document_type,
              file_blob,
              processed_text,
              user_id,
              status
          ) VALUES (
              v_filename,
              SUBSTR(v_mime_type, 1, 50),
              v_blob,
              v_clob,
              :APP_USER,
              'PENDING'
          ) RETURNING document_id INTO v_document_id;
          
          COMMIT;
          
          BEGIN
              PKG_APUNTIA_RAG.process_document(v_document_id);
              apex_application.g_print_success_message := 
                  'Documento "' || v_filename || '" procesado exitosamente.';
          EXCEPTION
              WHEN OTHERS THEN
                  UPDATE APUNTIA_DOCUMENTS 
                  SET status = 'ERROR'
                  WHERE document_id = v_document_id;
                  
                  apex_application.g_print_success_message := 
                      'Documento cargado pero hubo un problema al procesarlo: ' || SQLERRM;
          END;
          
          DELETE FROM apex_application_temp_files WHERE name = :P2_FILE_UPLOAD;
          
      EXCEPTION
          WHEN OTHERS THEN
              apex_error.add_error(
                  p_message => 'Error: ' || SQLERRM,
                  p_display_location => apex_error.c_inline_in_notification
              );
      END;

  execution: 
    sequence: 10
    point: Processing
    run-process: Once Per Page Visit (default)

  success-message: 
    success-message: 'Listo :D'

  error: 
    display-location: Inline in Notification

